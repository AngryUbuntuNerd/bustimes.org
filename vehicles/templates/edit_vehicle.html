{% extends 'page.html' %}

{% block title %}Edit details – {{ vehicle }} – bustimes.org{% endblock %}

{% block canonical %}<meta name="robots" content="noindex">{% endblock %}

{% block bodyclass %}narrow{% endblock %}

{% block content %}

{% if submitted or moved_to %}

    <h1>Thank you</h1>

    {% if moved_to %}
        <p>Vehicle moved to {{ moved_to }}</p>
    {% endif %}

    {% if submitted %}
        <p>I’ll update {% if moved_to %}the other{% else %}those{% endif %} details shortly</p>
    {% endif %}

{% else %}

    <h1>Edit vehicle details</h1>

    {% if pending_edits %}
        <p class="message">❗ There’s already a pending edit for this vehicle</p>
    {% endif %}

    <p>(You can also <a href="{{ vehicle.operator.get_absolute_url }}/vehicles/edit">edit several {{ vehicle.operator }} vehicles at once</a>)</p>

    <form action="/vehicles/{{ vehicle.id }}/edit" method="POST">
        <p>Ticket machine code:<br>
        {{ vehicle.code }}</p>

        {{ form.as_p }}

        <input type="submit" value="Save changes">
    </form>

{% endif %}

{% if previous %}
    <p class="previous"><a href="{{ previous.get_absolute_url }}/edit">&larr; {{ previous }}</a></p>
{% endif %}

{% if next %}
    <p class="next"><a href="{{ next.get_absolute_url }}/edit">{{ next }} &rarr;</a></p>
{% endif %}

{% endblock %}

{% block ad %}{% endblock %}

{% block foot %}
    {% load static %}
    <script src="{% static 'js/accessible-autocomplete/accessible-autocomplete.min.js' %}"></script>
    <script>
        window.addEventListener('load', function() {
            var selectElement = document.getElementById('id_vehicle_type');
            if (selectElement) {
                accessibleAutocomplete.enhanceSelectElement({
                    selectElement: selectElement
                });
            }
        });
    </script>
{% endblock %}
