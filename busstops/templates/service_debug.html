{% extends 'page.html' %}

{% block title %}{{ object }} – Bus Times{% endblock %}

{% block content %}

<h1>{{ object }}</h1>

<h2>Service codes</h2>

<table>
    <thead>
        <tr><th>Scheme</th><th>Code</th><th>siri_one_shot</th></tr>
    </thead>
    <tbody>
        {% for code in codes %}
            <tr><td>{{ code.scheme }}</td><td>{{ code.code }}</td><td>{{ code.siri_one_shot }}</td></tr>
        {% endfor %}
    </tbody>
</table>

<h2>Routes</h2>

{% for route in service.route_set.all %}
<h3>{{ route.code }}</h3>
<ul class="bulleted">
{% for trip in route.trip_set.all %}
<li>
    {{ trip.start }} – {{ trip.end }}<br>
    {{ trip.calendar.start_date }} – {{ trip.calendar.end_date }}:<br>
    {% if trip.calendar.mon %}mon{% endif %}
    {% if trip.calendar.tue %}tue{% endif %}
    {% if trip.calendar.wed %}wed{% endif %}
    {% if trip.calendar.thu %}thu{% endif %}
    {% if trip.calendar.fri %}fri{% endif %}
    {% if trip.calendar.sat %}sat{% endif %}
    {% if trip.calendar.sun %}sun{% endif %}
    <ul class="bulleted">
    {% for d in trip.calendar.calendardate_set.all %}
        <li>{{ d.start_date }} - {{ d.end_date }}: {{ d.operation }}</li>
    {% endfor %}
    </ul>
</li>
{% endfor %}
</ul>
{% endfor %}

{% endblock %}
