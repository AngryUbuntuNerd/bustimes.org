language: python
cache: pip
services:
  - postgresql
before_script:
  - psql -U postgres -c 'create extension postgis'
  - psql -U postgres -c 'create database bustimes'
  - ./manage.py migrate
script:
  - coverage run --source=buses,busstops,timetables manage.py test -v 3 --parallel 4
  - pylint buses busstops timetables | cat
after_success:
  coveralls
