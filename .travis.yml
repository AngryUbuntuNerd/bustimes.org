language: python
python:
  - "3.4"
  - "3.5"
cache: pip
services:
  - postgresql
before_script:
  - psql -U postgres -c 'create extension postgis'
  - psql -U postgres -c 'create database bustimes'
  - ./manage.py migrate
script:
  - coverage run --source=buses,busstops,timetables manage.py test -v 3
  - pylint buses busstops timetables | cat
  - flake8 buses busstops timetables
after_success:
  coveralls
