language: python
python:
#  - "2.7"
  - "3.4"
  - "3.5"
cache: pip
services:
  - postgresql
before_script:
  - psql -U postgres -c 'create extension postgis'
  - psql -U postgres -c 'create database bustimes'
  - ./manage.py migrate
script:
  - coverage run --source=buses,busstops,timetables manage.py test -v 3
  - pylint buses busstops timetables | cat
  - flake8 buses busstops timetables
after_success:
  coveralls
virtualenv:
  system_site_packages: true
addons:
  apt:
    packages:
    - pylint
    - python-bs4
    - python-dateutil
    - python-lxml
    - python-psycopg2
    - python-requests
